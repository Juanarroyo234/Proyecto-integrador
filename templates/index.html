<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>EstadÃ­sticas Futbol - Estilo Casino</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <div class="container">
    <h1>ðŸŽ° Liga Casino Futbolera ðŸŽ°</h1>

    <nav>
      <button onclick="cargarPartidos()">ðŸ“‹ Ver Partidos</button>
      <button onclick="cargarTabla()">ðŸ“Š Ver Tabla</button>
      <button onclick="predecir()">ðŸ”® Predecir Resultado</button>
    </nav>

    <section id="output"></section>

    <section id="predictor">
      <h2>ðŸ”® PredicciÃ³n de Resultado</h2>
      <input type="text" id="local" placeholder="Equipo Local">
      <input type="text" id="visita" placeholder="Equipo Visitante">
      <button onclick="enviarPrediccion()">Predecir</button>
    </section>
  </div>

  <script>
    async function cargarPartidos() {
      const res = await fetch('/partidos');
      const data = await res.json();
      let html = '<h2>ðŸ“‹ Partidos Registrados</h2><ul>';
      data.forEach(p => {
        html += `<li>${p.equipo_local} ${p.goles_local} - ${p.goles_visitante} ${p.equipo_visitante} (${p.resultado})</li>`;
      });
      html += '</ul>';
      document.getElementById('output').innerHTML = html;
    }

    async function cargarTabla() {
      const res = await fetch('/tabla');
      const data = await res.json();
      let html = '<h2>ðŸ“Š Tabla de Posiciones</h2><table><tr><th>Equipo</th><th>Puntos</th></tr>';
      data.forEach(e => {
        html += `<tr><td>${e.equipo}</td><td>${e.puntos}</td></tr>`;
      });
      html += '</table>';
      document.getElementById('output').innerHTML = html;
    }

    async function enviarPrediccion() {
      const local = document.getElementById("local").value;
      const visita = document.getElementById("visita").value;
      const res = await fetch(`/predecir/?equipo_local=${local}&equipo_visitante=${visita}`);
      const data = await res.json();
      document.getElementById("output").innerHTML = `
        <h2>Resultado:</h2>
        <p>${local} vs ${visita} â†’ <strong>${data.prediccion}</strong></p>
      `;
    }
  </script>
</body>
</html>
